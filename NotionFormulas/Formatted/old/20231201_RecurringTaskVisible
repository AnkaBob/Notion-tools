
or(
    # First of all we check if the task has ever been done, if not we show it,
    empty(prop("Last done time")),
    
    # If not empty we check for other conditions
    and(
        # Removed for now as I can't understand the logic behind it
        #or(
        #    empty(prop("Day of the month (from)")),
        #    or(
        #        #If the last done time is more than a month ago 
        #        dateBetween(now(), prop("Last done time"), "months") > 0,
        #        #or the day of the month is more than the last done time
        #        prop("Day of the month (from)") > date(prop("Last done time"))
        #    )
        #),

        #Checking month, day and hour intervals
        or(
            empty(prop("Months intervals")),
            prop("Months intervals") <= dateBetween(now(), prop("Last done time"), "months")
        ),
        or(
            empty(prop("Days intervals")),
            prop("Days intervals") <= prop("Days since last done")
        ),
        or(
            empty(prop("Hours intervals")),
            prop("Hours intervals") <= dateBetween(now(), prop("Last done time"), "hours")
        )
    )
)


#Have a separate function for the last done time is empty
#We need to check if days since last done is empty, if so we show the task
#Should not be needed because the default value is 999999
#Add the skipped day information
#It seems that the fomula don't work at all if the last_done is empty, maybe we can move the test at the beginning of the formula